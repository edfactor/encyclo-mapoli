<Project>
  <PropertyGroup>
    <Company>DeMoulas Super Markets, Inc</Company>
    <Authors>NGDS Core Team | $(Company)</Authors>
    <Copyright>Copyright Â© $(Company) $([System.DateTime]::Now.Year)</Copyright>

    <TargetFramework>net8.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <LangVersion>latest</LangVersion>

    <RepositoryType>Git</RepositoryType>
    <RepositoryUrl>https://bitbucket.org/demoulas/smart-profit-sharing/</RepositoryUrl>
    <!-- Publish the repository URL in the built .nupkg (in the NuSpec <Repository> element) -->
    <PublishRepositoryUrl>true</PublishRepositoryUrl>

    <!-- Embed source files that are not tracked by the source control manager in the PDB -->
    <EmbedUntrackedSources>true</EmbedUntrackedSources>

    <!-- Recommended: Embed symbols containing Source Link in the main file (exe/dll) -->
    <DebugType>embedded</DebugType>

    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <!-- CS8034 is loading the analyzers more than once -->
    <NoWarn>CA2227;CA1715;CA1000;CA1822;IDE0062;IDE1006;IDE0090;CS1591;CS8034;VSSpell001;NU1507;NU1900;S1481;IDE0161;VSTHRD200</NoWarn>

    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest</AnalysisLevel>
    <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
    <EnforceFIPSPolicy>false</EnforceFIPSPolicy>
    <Deterministic>true</Deterministic>
  </PropertyGroup>

  <ItemGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <PackageReference Include="AsyncAwaitBestPractices">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.CodeAnalysis.Analyzers">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Roslynator.Analyzers">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Roslynator.Formatting.Analyzers">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="SonarAnalyzer.CSharp">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.VisualStudio.Threading.Analyzers">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>

    <PackageReference Include="Microsoft.EntityFrameworkCore.Analyzers">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>

  </ItemGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <DebugSymbols>true</DebugSymbols>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.SourceLink.Bitbucket.Git" PrivateAssets="All" />
  </ItemGroup>

  <Target Name="SetVersion" BeforeTargets="Build">
    <PropertyGroup>
      <!-- Using the format: major.minor.patch.build -->
      <BuildNumber>$([System.DateTime]::Now.ToString(yyyyMMdd))</BuildNumber>
      <VersionPrefix>1.0.0</VersionPrefix>
      <VersionSuffix>ci</VersionSuffix>
      <AssemblyVersion>$(VersionPrefix).$(BuildNumber)</AssemblyVersion>
      <FileVersion>$(VersionPrefix).$(BuildNumber)</FileVersion>
      <AssemblyInformationalVersion>$(VersionPrefix)-$(VersionSuffix)+$(BuildNumber)</AssemblyInformationalVersion>
    </PropertyGroup>
  </Target>
</Project>
